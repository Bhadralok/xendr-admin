import { useEffect, useRef } from "react";
import gsap from "gsap";
import { MorphSVGPlugin } from "gsap/MorphSVGPlugin";

gsap.registerPlugin(MorphSVGPlugin);

const paths = [
  "M30.7,-47.4C43.2,-39.6,59.3,-37,67,-28.2C74.8,-19.4,74.2,-4.4,72.7,10.9C71.3,26.3,68.9,42,59.3,49.3C49.7,56.6,32.8,55.5,18.3,57.7C3.7,60,-8.6,65.5,-22.7,66.3C-36.8,67.2,-52.8,63.4,-62.5,53.4C-72.2,43.5,-75.6,27.4,-77.6,11.3C-79.6,-4.7,-80.2,-20.8,-73,-31.9C-65.7,-42.9,-50.5,-48.9,-37,-56.3C-23.5,-63.6,-11.8,-72.4,-1.3,-70.3C9.1,-68.2,18.1,-55.2,30.7,-47.4Z",
  "M34.1,-54C42.7,-47.6,47,-35.5,52.7,-23.8C58.4,-12.1,65.5,-0.8,64.5,9.7C63.6,20.2,54.7,29.9,46.4,41.3C38.2,52.7,30.7,65.7,18.4,74.7C6.2,83.7,-10.6,88.7,-22.4,82.5C-34.2,76.2,-40.9,58.7,-48,44.8C-55.2,30.8,-62.9,20.5,-65.6,8.8C-68.2,-2.9,-65.8,-15.9,-59.5,-26.1C-53.2,-36.3,-43,-43.6,-32.4,-49C-21.8,-54.4,-10.9,-57.9,0.9,-59.4C12.8,-60.9,25.6,-60.3,34.1,-54Z",
  "M51.9,-65C67.1,-60.4,79.1,-45,83,-28.1C86.9,-11.3,82.6,7.1,75.3,22.8C67.9,38.5,57.4,51.6,44.4,56.7C31.3,61.9,15.6,59.1,-1.4,61C-18.4,62.9,-36.9,69.5,-51.5,64.9C-66.2,60.3,-77.1,44.4,-81.8,27.2C-86.6,10,-85.2,-8.6,-75.6,-20.4C-66,-32.1,-48.2,-37,-34.3,-42C-20.3,-46.9,-10.1,-51.9,4.1,-57.6C18.4,-63.3,36.7,-69.6,51.9,-65Z",
  "M45.9,-72.8C55.9,-65,57.8,-46.2,64.1,-30C70.5,-13.8,81.3,-0.3,81.3,12.9C81.3,26.1,70.6,39,58.4,47.4C46.2,55.8,32.4,59.7,19,62.6C5.6,65.6,-7.4,67.7,-18.9,64.3C-30.4,61,-40.3,52.3,-48,42.2C-55.7,32.2,-61.1,20.9,-62.7,9.1C-64.2,-2.7,-61.8,-14.9,-56.8,-25.9C-51.7,-36.9,-44,-46.7,-34.1,-54.5C-24.2,-62.2,-12.1,-68,2.9,-72.5C18,-77.1,36,-80.5,45.9,-72.8Z",
  "M55.8,-61.8C70.6,-54,79.9,-34.8,81.2,-16C82.4,2.8,75.6,21.3,63,30C50.4,38.7,31.9,37.7,16.4,42.2C0.9,46.6,-11.6,56.5,-22.2,55.1C-32.7,53.8,-41.3,41.3,-50.9,27.9C-60.5,14.4,-71.1,0,-72.5,-16.3C-73.8,-32.6,-65.9,-50.8,-52.2,-58.8C-38.6,-66.9,-19.3,-64.7,0.6,-65.4C20.4,-66,40.9,-69.6,55.8,-61.8Z",
  "M39.4,-68.4C50.4,-61.8,58.4,-50.1,67.3,-37.8C76.1,-25.6,85.9,-12.8,89,1.8C92.2,16.4,88.7,32.8,78.9,43.5C69.2,54.2,53.1,59.2,38.9,62.3C24.7,65.5,12.3,66.9,-1.9,70.3C-16.2,73.7,-32.5,79,-46.7,75.9C-61,72.7,-73.3,61.1,-81.6,47C-89.8,32.9,-94,16.5,-93.2,0.5C-92.3,-15.5,-86.4,-30.9,-76.1,-41.6C-65.9,-52.3,-51.5,-58.2,-38.1,-63.4C-24.7,-68.7,-12.3,-73.2,0.9,-74.8C14.2,-76.4,28.3,-75,39.4,-68.4Z",
];

export default function Blob() {
  const pathRef = useRef(null);
  let index = 0;

  useEffect(() => {
    const loop = () => {
      index = (index + 1) % paths.length;
      gsap.to(pathRef.current, {
        duration: 2,
        ease: "power2.inOut",
        morphSVG: paths[index],
        onComplete: loop,
      });
    };

    loop();
  }, []);

  return (
    <svg viewBox="0 0 200 200" width="320">
      <path
        ref={pathRef}
        d={paths[0]}
        fill="#190f00"
        transform="translate(100 100)"
      />
    </svg>
  );
}
